@model TableOrdering.Contracts.OrderDetailDto
@{
    ViewData["Title"] = $"Chi tiết đơn {Model.Code}";
    Layout = "_Layout";
}

<h2>Chi tiết đơn @Model.Code</h2>
<div class="mb-3">
    <span class="badge bg-info">Trạng thái: @Model.Status</span>
    <span class="badge bg-secondary ms-2">Tạo lúc: @Model.CreatedAt.ToLocalTime()</span>
</div>

<table class="table table-sm align-middle">
    <thead>
        <tr>
            <th>Món</th>
            <th style="width:120px" class="text-end">Số lượng</th>
            <th style="width:140px" class="text-end">Đơn giá</th>
            <th style="width:140px" class="text-end">Thành tiền</th>
            <th>Ghi chú</th>
        </tr>
    </thead>
    <tbody>
    @if (Model.Items == null || !Model.Items.Any())
    {
        <tr><td colspan="5" class="text-muted">Không có món nào</td></tr>
    }
    else
    {
        foreach (var it in Model.Items)
        {
            <tr>
                <td>@it.Name</td>
                <td class="text-end">@it.Qty</td>
                <td class="text-end">@it.UnitPrice.ToString("n0")</td>
                <td class="text-end">@it.LineTotal.ToString("n0")</td>
                <td>@it.Note</td>
            </tr>
        }
    }
    </tbody>
</table>

<div class="d-flex justify-content-end">
    <div class="text-end">
        <div>Tạm tính: <strong>@Model.Subtotal.ToString("n0")</strong></div>
        @if (Model.Discount > 0)
        {
            <div>Giảm giá: <strong class="text-danger">-@Model.Discount.ToString("n0")</strong></div>
        }
        <div>Tổng: <strong class="fs-5">@Model.Total.ToString("n0")</strong></div>
    </div>
</div>

<div class="mt-3">
    <a class="btn btn-outline-secondary" asp-controller="Board" asp-action="Index">Quay lại bảng bếp</a>
</div>
